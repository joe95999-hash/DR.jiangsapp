<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000">
    <title>訓練儀表板</title>

    <link rel="icon" type="image/png" href="icon.png">
    <link rel="apple-touch-icon" href="icon.png">

    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        /* --- Garmin 風格核心樣式 --- */
        :root {
            --bg-color: #000000;
            --card-bg: #1A1A1A;
            --primary: #00BFFF; /* Garmin 電光藍 */
            --success: #00FF00; /* 完成綠 */
            --text-main: #FFFFFF;
            --text-sub: #A0A0A0;
            --border: #333333;
        }

        body {
            font-family: 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            padding-bottom: 90px;
            -webkit-tap-highlight-color: transparent;
        }

        /* 頂部固定區 */
        .sticky-header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background-color: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
        }

        /* 頂部導航欄 */
        header {
            padding: 15px 20px;
            padding-top: max(15px, env(safe-area-inset-top));
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        h1 {
            margin: 0;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-family: 'Roboto Condensed', sans-serif;
            font-weight: 700;
        }

        .reset-btn {
            background: transparent;
            border: 1px solid var(--text-sub);
            color: var(--text-sub);
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.75rem;
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.3s;
        }
        .reset-btn:active {
            border-color: var(--primary);
            color: var(--primary);
        }

        /* 儀表板進度區 */
        .dashboard-stats {
            padding: 10px 20px 20px 20px;
            text-align: center;
        }
        .progress-track {
            background: #333;
            height: 6px;
            border-radius: 3px;
            width: 100%;
            margin-bottom: 8px;
            overflow: hidden;
        }
        .progress-fill {
            background: linear-gradient(90deg, var(--primary), #0088cc);
            height: 100%;
            width: 0%;
            border-radius: 3px;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 10px rgba(0, 191, 255, 0.5);
        }
        .progress-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: var(--text-sub);
            font-family: 'Roboto Condensed', sans-serif;
            text-transform: uppercase;
        }
        .progress-value {
            color: var(--primary);
            font-weight: bold;
            font-size: 1rem;
        }

        /* 分頁籤 (Tabs) */
        .tabs {
            display: flex;
            background: var(--bg-color);
            border-bottom: 1px solid var(--border);
        }
        .tab-btn {
            flex: 1;
            padding: 15px 0;
            background: transparent;
            border: none;
            color: var(--text-sub);
            font-size: 0.95rem;
            font-weight: 700;
            text-transform: uppercase;
            position: relative;
            cursor: pointer;
            font-family: 'Roboto Condensed', sans-serif;
            transition: color 0.3s;
        }
        .tab-btn.active {
            color: var(--primary);
        }
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: 0; left: 0; width: 100%; height: 3px;
            background-color: var(--primary);
            box-shadow: 0 -2px 8px rgba(0, 191, 255, 0.6);
        }

        /* 內容區塊 */
        .content-area {
            padding: 20px 15px;
            display: none;
            animation: fadeIn 0.4s ease;
        }
        .content-area.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Garmin 風格卡片 */
        .exercise-card {
            background-color: var(--card-bg);
            border-radius: 8px;
            margin-bottom: 16px;
            overflow: hidden;
            border: 1px solid #333;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        /* 影片區 */
        .media-box {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 56.25%;
            background: #000;
            cursor: pointer;
        }
        .media-box img {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            object-fit: cover;
            opacity: 0.8;
            transition: opacity 0.3s;
        }
        .media-box:active img { opacity: 1; }
        .play-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.3);
        }
        .play-icon {
            width: 40px; height: 40px;
            border: 2px solid var(--text-main);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(2px);
        }
        .play-icon::after {
            content: '';
            border-left: 12px solid var(--text-main);
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            margin-left: 4px;
        }
        .media-box iframe {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            border: 0;
        }

        /* 卡片數據區 */
        .card-body {
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .info-col {
            flex-grow: 1;
        }
        .ex-title {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 4px;
            color: var(--text-main);
        }
        .ex-meta {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 0.85rem;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .ex-meta span { margin-right: 10px; }
        .ex-meta span::after { content: '|'; color: #444; margin-left: 10px; }
        .ex-meta span:last-child::after { content: ''; }

        /* 完成按鈕 */
        .check-btn {
            background: transparent;
            border: 2px solid var(--text-sub);
            width: 32px; height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            flex-shrink: 0;
            margin-left: 15px;
        }
        .check-btn svg {
            fill: transparent;
            width: 18px; height: 18px;
            transition: fill 0.3s;
        }

        /* 完成狀態 */
        .exercise-card.completed { border-color: var(--success); }
        .exercise-card.completed .ex-title { color: var(--text-sub); text-decoration: line-through; }
        .exercise-card.completed .ex-meta { color: var(--text-sub); }
        .exercise-card.completed .check-btn {
            background-color: var(--success);
            border-color: var(--success);
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.4);
        }
        .exercise-card.completed .check-btn svg { fill: #000; }
        .exercise-card.completed .media-box img { filter: grayscale(100%); }

        .footer-note {
            text-align: center;
            color: #444;
            font-size: 0.75rem;
            padding: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
    </style>
</head>
<body>

<div class="sticky-header">
    <header>
        <h1>My Training</h1>
        <button class="reset-btn" onclick="window.confirmReset()">Reset</button>
    </header>

    <div class="dashboard-stats">
        <div class="progress-info" style="margin-bottom:5px;">
            <span>Completion</span>
            <span id="progressPercent" class="progress-value">0%</span>
        </div>
        <div class="progress-track">
            <div class="progress-fill" id="progressBar"></div>
        </div>
        <div class="progress-info">
            <span id="progressCount">0 / 0</span>
            <span>Status: Active</span>
        </div>
    </div>

    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('strength', this)">Strength</button>
        <button class="tab-btn" onclick="switchTab('movement', this)">Movement</button>
    </div>
</div>

<div id="strength" class="content-area active">

    <div class="exercise-card" id="s1">
        <div class="media-box" onclick="loadVideo(this, '-r0TYqz7INw')">
            <img src="https://img.youtube.com/vi/-r0TYqz7INw/hqdefault.jpg" alt="動態伸展">
            <div class="play-overlay"><div class="play-icon"></div></div>
        </div>
        <div class="card-body">
            <div class="info-col">
                <div class="ex-title">動態伸展 (Dynamic Warmup)</div>
                <div class="ex-meta"><span>WARM UP</span></div>
            </div>
            <div class="check-btn" onclick="toggleComplete('s1')">
                <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
            </div>
        </div>
    </div>

    <div class="exercise-card" id="s2">
        <div class="media-box" onclick="loadVideo(this, 'd-RU2HtKoXs')">
            <img src="https://img.youtube.com/vi/d-RU2HtKoXs/hqdefault.jpg" alt="分腿蹲">
            <div class="play-overlay"><div class="play-icon"></div></div>
        </div>
        <div class="card-body">
            <div class="info-col">
                <div class="ex-title">保加利亞分腿蹲</div>
                <div class="ex-meta"><span>12 REPS</span><span>3 SETS</span></div>
            </div>
            <div class="check-btn" onclick="toggleComplete('s2')">
                <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
            </div>
        </div>
    </div>

    <div class="exercise-card" id="s3">
        <div class="media-box" onclick="loadVideo(this, 'l1-_acQF6v4')">
            <img src="https://img.youtube.com/vi/l1-_acQF6v4/hqdefault.jpg" alt="硬舉">
            <div class="play-overlay"><div class="play-icon"></div></div>
        </div>
        <div class="card-body">
            <div class="info-col">
                <div class="ex-title">單腿(雙腿)硬舉</div>
                <div class="ex-meta"><span>12 REPS</span><span>3 SETS</span></div>
            </div>
            <div class="check-btn" onclick="toggleComplete('s3')">
                <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
            </div>
        </div>
    </div>

    <div class="exercise-card" id="s4">
        <div class="media-box" onclick="loadVideo(this, 'Jb3pTR5O8Yg')">
            <img src="https://img.youtube.com/vi/Jb3pTR5O8Yg/hqdefault.jpg" alt="深蹲">
            <div class="play-overlay"><div class="play-icon"></div></div>
        </div>
        <div class="card-body">
            <div class="info-col">
                <div class="ex-title">高腳杯深蹲</div>
                <div class="ex-meta"><span>12 REPS</span><span>3 SETS</span></div>
            </div>
            <div class="check-btn" onclick="toggleComplete('s4')">
                <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
            </div>
        </div>
    </div>

    <div class="exercise-card" id="s5">
        <div class="media-box" onclick="loadVideo(this, 'EtnEFgGbqG8')">
            <img src="https://img.youtube.com/vi/EtnEFgGbqG8/hqdefault.jpg" alt="相撲硬舉">
            <div class="play-overlay"><div class="play-icon"></div></div>
        </div>
        <div class="card-body">
            <div class="info-col">
                <div class="ex-title">相撲硬舉</div>
                <div class="ex-meta"><span>12 REPS</span><span>3 SETS</span></div>
            </div>
            <div class="check-btn" onclick="toggleComplete('s5')">
                <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
            </div>
        </div>
    </div>
</div>

<div id="movement" class="content-area">

    <div class="exercise-card" id="m1">
        <div class="media-box" onclick="loadVideo(this, '-r0TYqz7INw')">
            <img src="https://img.youtube.com/vi/-r0TYqz7INw/hqdefault.jpg" alt="動態伸展">
            <div class="play-overlay"><div class="play-icon"></div></div>
        </div>
        <div class="card-body">
            <div class="info-col">
                <div class="ex-title">動態伸展</div>
                <div class="ex-meta"><span>WARM UP</span></div>
            </div>
            <div class="check-btn" onclick="toggleComplete('m1')">
                <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
            </div>
        </div>
    </div>

    <div class="exercise-card" id="m2">
        <div class="media-box" onclick="loadVideo(this, '0URq44w4cjU')">
            <img src="https://img.youtube.com/vi/0URq44w4cjU/hqdefault.jpg" alt="落地練習">
            <div class="play-overlay"><div class="play-icon"></div></div>
        </div>
        <div class="card-body">
            <div class="info-col">
                <div class="ex-title">落地練習</div>
                <div class="ex-meta"><span>6-8 REPS</span><span>3 SETS</span></div>
            </div>
            <div class="check-btn" onclick="toggleComplete('m2')">
                <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
            </div>
        </div>
    </div>

    <div class="exercise-card" id="m3">
        <div class="media-box" onclick="loadVideo(this, 'LvQLWtzQsRE')">
            <img src="https://img.youtube.com/vi/LvQLWtzQsRE/hqdefault.jpg" alt="落地進階">
            <div class="play-overlay"><div class="play-icon"></div></div>
        </div>
        <div class="card-body">
            <div class="info-col">
                <div class="ex-title">落地練習進階</div>
                <div class="ex-meta"><span>6-8 REPS</span><span>3 SETS</span></div>
            </div>
            <div class="check-btn" onclick="toggleComplete('m3')">
                <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
            </div>
        </div>
    </div>

    <div class="exercise-card" id="m4">
        <div class="media-box" onclick="loadVideo(this, 'w_GuoPFQs8c')">
            <img src="https://img.youtube.com/vi/w_GuoPFQs8c/hqdefault.jpg" alt="雪橇推">
            <div class="play-overlay"><div class="play-icon"></div></div>
        </div>
        <div class="card-body">
            <div class="info-col">
                <div class="ex-title">雪橇推 (Sled Push)</div>
                <div class="ex-meta"><span>10-20 M</span><span>4 SETS</span></div>
            </div>
            <div class="check-btn" onclick="toggleComplete('m4')">
                <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
            </div>
        </div>
    </div>

    <div class="exercise-card" id="m5">
        <div class="media-box" onclick="loadVideo(this, '5j6mh_VV2rU')">
            <img src="https://img.youtube.com/vi/5j6mh_VV2rU/hqdefault.jpg" alt="雪橇後拉">
            <div class="play-overlay"><div class="play-icon"></div></div>
        </div>
        <div class="card-body">
            <div class="info-col">
                <div class="ex-title">雪橇後拉 (Sled Drag)</div>
                <div class="ex-meta"><span>10-20 M</span><span>4 SETS</span></div>
            </div>
            <div class="check-btn" onclick="toggleComplete('m5')">
                <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
            </div>
        </div>
    </div>

    <div class="exercise-card" id="m6">
        <div class="media-box" onclick="loadVideo(this, 'NeDKAuootaE')">
            <img src="https://img.youtube.com/vi/NeDKAuootaE/hqdefault.jpg" alt="單腳站立">
            <div class="play-overlay"><div class="play-icon"></div></div>
        </div>
        <div class="card-body">
            <div class="info-col">
                <div class="ex-title">坐姿單腳站立</div>
                <div class="ex-meta"><span>12 REPS</span><span>4 SETS</span></div>
            </div>
            <div class="check-btn" onclick="toggleComplete('m6')">
                <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
            </div>
        </div>
    </div>

    <div class="exercise-card" id="m7">
        <div class="media-box" onclick="loadVideo(this, 'RhXb6oKP04s')">
            <img src="https://img.youtube.com/vi/RhXb6oKP04s/hqdefault.jpg" alt="火箭推">
            <div class="play-overlay"><div class="play-icon"></div></div>
        </div>
        <div class="card-body">
            <div class="info-col">
                <div class="ex-title">分腿單邊火箭推</div>
                <div class="ex-meta"><span>12 REPS</span><span>4 SETS</span></div>
            </div>
            <div class="check-btn" onclick="toggleComplete('m7')">
                <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
            </div>
        </div>
    </div>

    <div class="exercise-card" id="m8">
        <div class="media-box" onclick="loadVideo(this, '-R0yay35Kc0')">
            <img src="https://img.youtube.com/vi/-R0yay35Kc0/hqdefault.jpg" alt="飛輪">
            <div class="play-overlay"><div class="play-icon"></div></div>
        </div>
        <div class="card-body">
            <div class="info-col">
                <div class="ex-title">騎飛輪 (Spinning)</div>
                <div class="ex-meta"><span>40 MINS</span><span>CARDIO</span></div>
            </div>
            <div class="check-btn" onclick="toggleComplete('m8')">
                <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
            </div>
        </div>
    </div>
</div>

<div class="footer-note">BEAT YESTERDAY</div>

<script>
    window.onload = function() {
        try {
            const savedData = localStorage.getItem('garmin_progress_v2'); // 使用新key避免衝突
            if (savedData) {
                const completedTasks = JSON.parse(savedData);
                completedTasks.forEach(id => {
                    const card = document.getElementById(id);
                    if(card) {
                        card.classList.add('completed');
                    }
                });
            }
        } catch (e) { console.warn(e); }
        updateProgressBar();
    };

    window.switchTab = function(tabId, btn) {
        document.querySelectorAll('.content-area').forEach(el => el.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
        btn.classList.add('active');
        window.scrollTo(0, 0);
    }

    function updateProgressBar() {
        const totalTasks = document.querySelectorAll('.exercise-card').length;
        const completedTasks = document.querySelectorAll('.exercise-card.completed').length;
        let percent = 0;
        if(totalTasks > 0) percent = Math.round((completedTasks / totalTasks) * 100);
        
        document.getElementById('progressBar').style.width = percent + "%";
        document.getElementById('progressPercent').innerText = percent + "%";
        document.getElementById('progressCount').innerText = `${completedTasks} / ${totalTasks}`;
    }

    window.toggleComplete = function(id) {
        event.stopPropagation();
        const card = document.getElementById(id);
        if(!card) return;
        card.classList.toggle('completed');
        saveProgress();
        updateProgressBar();
    }

    function saveProgress() {
        try {
            const completedCards = document.querySelectorAll('.exercise-card.completed');
            const ids = Array.from(completedCards).map(card => card.id);
            localStorage.setItem('garmin_progress_v2', JSON.stringify(ids));
        } catch (e) { }
    }

    window.confirmReset = function() {
        if(confirm("RESET ALL PROGRESS?")) {
            try { localStorage.removeItem('garmin_progress_v2'); } catch(e) {}
            document.querySelectorAll('.exercise-card').forEach(card => card.classList.remove('completed'));
            updateProgressBar();
        }
    }

    window.loadVideo = function(container, videoId) {
        container.innerHTML = `<iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1" allowfullscreen allow="autoplay"></iframe>`;
    }
</script>

</body>
</html>
